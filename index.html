<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
    
    <!-- Primary Meta Tags (defaults - overridden by React SEO component per page) -->
    <title>Limitless Cruises | Your Personal Cruise Consultant</title>
    <meta name="description" content="Your personal cruise consultant. Book cruise holidays with preferential rates, exclusive offers and expert advice from leading cruise lines worldwide." />
    <meta name="author" content="Limitless Cruises" />
    <meta name="robots" content="index, follow" />
    
    <!-- Canonical (overridden by React SEO component per page) -->
    <link rel="canonical" href="https://www.limitlesscruises.com" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/webp" href="https://xrbusklskmeaamwynfmm.supabase.co/storage/v1/object/public/WEB_site/favicon.webp" />
    <link rel="apple-touch-icon" sizes="180x180" href="https://xrbusklskmeaamwynfmm.supabase.co/storage/v1/object/public/WEB_site/favicon.webp" />
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#2C344C" />
    <meta name="msapplication-TileColor" content="#2C344C" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.limitlesscruises.com" />
    <meta property="og:title" content="Limitless Cruises | Your Personal Cruise Consultant" />
    <meta property="og:description" content="Your personal cruise consultant. Book cruise holidays with preferential rates, exclusive offers and expert advice from leading cruise lines worldwide." />
    <meta property="og:image" content="https://xrbusklskmeaamwynfmm.supabase.co/storage/v1/object/public/categories/about/About2.webp" />
    <meta property="og:site_name" content="Limitless Cruises" />
    <meta property="og:locale" content="en_GB" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://www.limitlesscruises.com" />
    <meta name="twitter:title" content="Limitless Cruises | Your Personal Cruise Consultant" />
    <meta name="twitter:description" content="Your personal cruise consultant. Book cruise holidays with preferential rates, exclusive offers and expert advice from leading cruise lines worldwide." />
    <meta name="twitter:image" content="https://xrbusklskmeaamwynfmm.supabase.co/storage/v1/object/public/categories/about/About2.webp" />
    
    <!-- Telephone Format Detection -->
    <meta name="format-detection" content="telephone=yes" />
    
    <!-- Preconnect to critical external resources only -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- Google Fonts - deferred to not block render on mobile -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'" crossorigin />
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" /></noscript>
    
    <!-- Fallback to system fonts before web fonts load -->
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
    </style>
    
    <!-- DNS prefetch for secondary resources (cheaper than preconnect) -->
    <link rel="dns-prefetch" href="https://xrbusklskmeaamwynfmm.supabase.co" />
    <link rel="dns-prefetch" href="https://www.widgety.co.uk" />
    <link rel="dns-prefetch" href="https://api.openweathermap.org" />
    <link rel="dns-prefetch" href="https://api.stormglass.io" />
    <link rel="dns-prefetch" href="https://challenges.cloudflare.com" />
    <link rel="dns-prefetch" href="https://www.googletagmanager.com" />
    
    <!-- Preload hero image for desktop only - mobile uses CSS gradient for instant LCP -->
    <!-- media="(min-width: 769px)" prevents mobile from downloading the hero image -->
    <link rel="preload" as="image" 
      media="(min-width: 769px)"
      href="https://xrbusklskmeaamwynfmm.supabase.co/storage/v1/render/image/public/WEB_site/hero.webp?width=1024&quality=85" 
      fetchpriority="high" 
      imagesrcset="https://xrbusklskmeaamwynfmm.supabase.co/storage/v1/render/image/public/WEB_site/hero.webp?width=1024&quality=85 1024w, https://xrbusklskmeaamwynfmm.supabase.co/storage/v1/render/image/public/WEB_site/hero.webp?width=1280&quality=85 1280w, https://xrbusklskmeaamwynfmm.supabase.co/storage/v1/render/image/public/WEB_site/hero.webp?width=1920&quality=85 1920w"
      imagesizes="(max-width: 1024px) 1024px, (max-width: 1280px) 1280px, 1920px" />
    
    <!-- Critical CSS for hero section - prevents render blocking for LCP -->
    <style>
      /* Hero section critical CSS - inline to prevent render block */
      .hero-elegant { position: relative; min-height: 600px; display: flex; align-items: center; overflow: hidden; background: #2C344C; }
      .hero-background-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; min-height: 600px; z-index: 0; }
      .hero-background-image img { width: 100%; height: 100%; object-fit: cover; display: block; }
      
      /* Critical layout styles to prevent render blocking on mobile */
      * { box-sizing: border-box; margin: 0; padding: 0; }
      body { font-family: Inter, system-ui, -apple-system, sans-serif; line-height: 1.6; color: #333; background: #fff; }
      #root { min-height: 100vh; display: flex; flex-direction: column; }
      
      /* Mobile: NO HERO IMAGE - gradient background for instant LCP */
      @media (max-width: 768px) {
        .hero-elegant { min-height: 400px; }
        .hero-background-image { 
          min-height: 400px; 
          background: linear-gradient(135deg, #2C344C 0%, #3d4a6a 40%, #1a2035 100%);
        }
        .hero-background-image img { display: none !important; }
      }
    </style>
    
    <!-- requestIdleCallback Polyfill for older browsers -->
    <script>
      if (!window.requestIdleCallback) {
        window.requestIdleCallback = function(callback, options) {
          const timeout = options?.timeout || 0;
          const start = Date.now();
          return setTimeout(function() {
            callback({
              didTimeout: false,
              timeRemaining: function() {
                return Math.max(0, 50 - (Date.now() - start));
              }
            });
          }, 1);
        };
        window.cancelIdleCallback = function(id) {
          clearTimeout(id);
        };
      }
    </script>
    
    <!-- Disable browser scroll restoration - React Router will handle it -->
    <!-- Force scroll to top immediately on page load (especially for mobile) -->
    <script>
      if ('scrollRestoration' in history) {
        history.scrollRestoration = 'manual';
      }
      // Immediately scroll to top - prevents mobile browsers from restoring scroll
      window.scrollTo(0, 0);
      // Also scroll on DOMContentLoaded in case browser scrolls during parse
      document.addEventListener('DOMContentLoaded', function() {
        window.scrollTo(0, 0);
      });
      // Scroll again on window load (after all resources loaded)
      window.addEventListener('load', function() {
        window.scrollTo(0, 0);
      });
    </script>
    
    <!-- Google Analytics 4 - Consent-aware loading (GDPR compliant) -->
    <script>
      // Initialize dataLayer immediately (no layout queries)
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      
      // Check if user has consented to cookies
      function hasAnalyticsConsent() {
        try {
          var consent = localStorage.getItem('cookie-consent');
          var consentDate = localStorage.getItem('cookie-consent-date');
          
          // Check if consent exists and hasn't expired (12 months)
          if (consent === 'accepted' && consentDate) {
            var expiryDate = new Date(consentDate);
            expiryDate.setMonth(expiryDate.getMonth() + 12);
            return new Date() < expiryDate;
          }
          return false;
        } catch (e) {
          return false;
        }
      }
      
      // Load GA4 only if consent given
      function loadGA4() {
        if (window.ga4Loaded || !hasAnalyticsConsent()) return;
        window.ga4Loaded = true;
        
        // Configure gtag
        gtag('js', new Date());
        gtag('config', 'G-GNY4BEL0HQ', { 
          'send_page_view': false,
          'transport_type': 'beacon'
        });
        
        // Load the script
        var script = document.createElement('script');
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-GNY4BEL0HQ';
        script.async = true;
        script.defer = true;
        document.head.appendChild(script);
        
        script.onload = function() {
          gtag('event', 'page_view');
        };
      }
      
      // Load after page load if consent already given
      window.addEventListener('load', function() {
        if (hasAnalyticsConsent()) {
          if ('requestIdleCallback' in window) {
            requestIdleCallback(loadGA4, { timeout: 2000 });
          } else {
            setTimeout(loadGA4, 2000);
          }
        }
      });
      
      // Listen for consent changes (when user clicks Accept)
      window.addEventListener('cookie-consent-changed', function(e) {
        if (e.detail && e.detail.status === 'accepted') {
          loadGA4();
        }
      });
    </script>
    
    <!-- Structured Data - Organization (Enhanced for rich results) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "TravelAgency",
      "@id": "https://www.limitlesscruises.com/#organization",
      "name": "Limitless Cruises",
      "alternateName": "Limitless Cruises Ltd",
      "description": "Your personal cruise consultant. ABTA protected cruise specialist offering bespoke cruise holidays with preferential rates, exclusive offers and expert advice. Based in Sheffield, UK, serving clients nationwide.",
      "url": "https://www.limitlesscruises.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://xrbusklskmeaamwynfmm.supabase.co/storage/v1/object/public/WEB_site/logo.webp",
        "width": 512,
        "height": 512
      },
      "image": "https://xrbusklskmeaamwynfmm.supabase.co/storage/v1/object/public/WEB_site/hero.webp",
      "telephone": "+441143213208",
      "email": "travel@limitlesscruises.com",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "GB"
      },
      "areaServed": {
        "@type": "Country",
        "name": "United Kingdom"
      },
      "priceRange": "££",
      "currenciesAccepted": "GBP",
      "paymentAccepted": "Credit Card, Debit Card, Bank Transfer",
      "openingHoursSpecification": [
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Monday", "Tuesday"],
          "opens": "By appointment",
          "closes": "By appointment"
        },
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Wednesday", "Thursday", "Friday"],
          "opens": "10:00",
          "closes": "20:00"
        },
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": "Saturday",
          "opens": "10:00",
          "closes": "21:00"
        },
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": "Sunday",
          "opens": "10:00",
          "closes": "18:00"
        }
      ],
      "sameAs": [
        "https://www.facebook.com/profile.php?id=61570469572535",
        "https://www.linkedin.com/company/limitless-cruises/",
        "https://www.youtube.com/@LimitlessCruises"
      ],
      "memberOf": {
        "@type": "Organization",
        "name": "ABTA - The Travel Association",
        "url": "https://www.abta.com",
        "identifier": "P7541"
      },
      "knowsAbout": [
        "Cruise Holidays",
        "Ocean Cruises",
        "River Cruises",
        "Fly Cruise Packages",
        "UK Cruise Departures",
        "Caribbean Cruises",
        "Mediterranean Cruises",
        "World Cruises",
        "Luxury Cruises",
        "Family Cruises"
      ],
      "hasOfferCatalog": {
        "@type": "OfferCatalog",
        "name": "Cruise Holidays",
        "itemListElement": [
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Personal Cruise Consultation",
              "description": "One-to-one advice from your dedicated cruise consultant"
            }
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Cruise Booking Service",
              "description": "Complete cruise booking and travel arrangement service"
            }
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Price Match Guarantee",
              "description": "We match any like-for-like quote from ABTA members"
            }
          }
        ]
      }
    }
    </script>
    
    <!-- Unregister old service worker (PWA removed) -->
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
          for (let registration of registrations) {
            registration.unregister().then(function(success) {
              if (success) {
                console.log('Old service worker unregistered successfully');
                // Clear caches created by old service worker
                if ('caches' in window) {
                  caches.keys().then(function(names) {
                    for (let name of names) {
                      caches.delete(name);
                    }
                  });
                }
              }
            });
          }
        });
      }
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
